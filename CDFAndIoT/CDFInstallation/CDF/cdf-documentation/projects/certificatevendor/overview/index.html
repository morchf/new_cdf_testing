



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.4">
    
    
      
        <title>CERTIFICATE VENDOR - Connected Device Framework (CDF)</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#certificate-vendor" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Connected Device Framework (CDF)" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Connected Device Framework (CDF)
              </span>
              <span class="md-header-nav__topic">
                CERTIFICATE VENDOR
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Connected Device Framework (CDF)" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Connected Device Framework (CDF)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="CONNECTED DEVICE FRAMEWORK (CDF)" class="md-nav__link">
      CONNECTED DEVICE FRAMEWORK (CDF)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Advanced
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Advanced
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../advanced/cicd/" title="CI/CD" class="md-nav__link">
      CI/CD
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../advanced/deployment/" title="Deployment" class="md-nav__link">
      Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../advanced/" title="Advanced Track" class="md-nav__link">
      Advanced Track
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Beginner
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Beginner
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../beginner/" title="Beginner Track" class="md-nav__link">
      Beginner Track
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Development
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Development
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/async/" title="Asynchronous Operations" class="md-nav__link">
      Asynchronous Operations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/config/" title="Configuration" class="md-nav__link">
      Configuration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/dependency-injection/" title="Dependency Injection" class="md-nav__link">
      Dependency Injection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/quickstart/" title="Development Getting Started" class="md-nav__link">
      Development Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/tech-stack/" title="Tech Stack" class="md-nav__link">
      Tech Stack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../development/unit-testing/" title="Unit testing" class="md-nav__link">
      Unit testing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Intermediate
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Intermediate
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../intermediate/" title="Intermediate Track" class="md-nav__link">
      Intermediate Track
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Postman
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Postman
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../postman/" title="Postman" class="md-nav__link">
      Postman
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" checked>
    
    <label class="md-nav__link" for="nav-7">
      Projects
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Projects
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/" title="Connected Device Framework" class="md-nav__link">
      Connected Device Framework
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-2" type="checkbox" id="nav-7-2">
    
    <label class="md-nav__link" for="nav-7-2">
      Assetlibrary
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-2">
        Assetlibrary
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/assetlibrary-swagger/" title="Connected Device Framework: Asset Library" class="md-nav__link">
      Connected Device Framework: Asset Library
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/events/" title="ASSET LIBRARY EVENTS" class="md-nav__link">
      ASSET LIBRARY EVENTS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/fine-grained-access-control/" title="ASSET LIBRARY FINE-GRAINED ACCESS CONTROL" class="md-nav__link">
      ASSET LIBRARY FINE-GRAINED ACCESS CONTROL
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/modes/" title="ASSET LIBRARY MODES" class="md-nav__link">
      ASSET LIBRARY MODES
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/overview/" title="ASSET LIBRARY OVERVIEW" class="md-nav__link">
      ASSET LIBRARY OVERVIEW
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/profiles/" title="ASSET LIBRARY:  Profiles" class="md-nav__link">
      ASSET LIBRARY:  Profiles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/templates-developer/" title="ASSET LIBRARY:  Templates (Developer)" class="md-nav__link">
      ASSET LIBRARY:  Templates (Developer)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary/templates-user/" title="ASSET LIBRARY:  Templates (User)" class="md-nav__link">
      ASSET LIBRARY:  Templates (User)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-3" type="checkbox" id="nav-7-3">
    
    <label class="md-nav__link" for="nav-7-3">
      Assetlibrary history
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-3">
        Assetlibrary history
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary-history/assetlibraryhistory-swagger/" title="Connected Device Framework: Asset Library History" class="md-nav__link">
      Connected Device Framework: Asset Library History
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../assetlibrary-history/overview/" title="ASSET LIBRARY HISTORY OVERVIEW" class="md-nav__link">
      ASSET LIBRARY HISTORY OVERVIEW
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-4" type="checkbox" id="nav-7-4">
    
    <label class="md-nav__link" for="nav-7-4">
      Auth devicecert
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-4">
        Auth devicecert
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../auth-devicecert/overview/" title="CUSTOM DEVICE AUTHORIZER" class="md-nav__link">
      CUSTOM DEVICE AUTHORIZER
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-5" type="checkbox" id="nav-7-5">
    
    <label class="md-nav__link" for="nav-7-5">
      Bulkcerts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-5">
        Bulkcerts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../bulkcerts/bulkcerts-swagger/" title="Connected Device Framework: Bulk Certs" class="md-nav__link">
      Connected Device Framework: Bulk Certs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bulkcerts/overview/" title="BULK CERTS REST API" class="md-nav__link">
      BULK CERTS REST API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-6" type="checkbox" id="nav-7-6">
    
    <label class="md-nav__link" for="nav-7-6">
      Certificateactivator
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-6">
        Certificateactivator
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../certificateactivator/overview/" title="CERTIFICATE ACTIVATOR" class="md-nav__link">
      CERTIFICATE ACTIVATOR
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-7" type="checkbox" id="nav-7-7" checked>
    
    <label class="md-nav__link" for="nav-7-7">
      Certificatevendor
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-7">
        Certificatevendor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        CERTIFICATE VENDOR
      </label>
    
    <a href="./" title="CERTIFICATE VENDOR" class="md-nav__link md-nav__link--active">
      CERTIFICATE VENDOR
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" title="Pre-Requisites" class="md-nav__link">
    Pre-Requisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-created-certificates" title="Pre-created Certificates" class="md-nav__link">
    Pre-created Certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-creation-with-a-device-csr" title="Certificate Creation with a Device CSR" class="md-nav__link">
    Certificate Creation with a Device CSR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-deploy" title="Auto-deploy" class="md-nav__link">
    Auto-deploy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#certificate-rotation-flow" title="Certificate Rotation Flow" class="md-nav__link">
    Certificate Rotation Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" title="Security" class="md-nav__link">
    Security
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-8" type="checkbox" id="nav-7-8">
    
    <label class="md-nav__link" for="nav-7-8">
      Commands
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-8">
        Commands
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/commands-swagger/" title="Commands swagger" class="md-nav__link">
      Commands swagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/ephemeral-groups/" title="Ephemeral groups" class="md-nav__link">
      Ephemeral groups
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/presigned-urls-developer/" title="Presigned urls developer" class="md-nav__link">
      Presigned urls developer
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../commands/presigned-urls-user/" title="Presigned urls user" class="md-nav__link">
      Presigned urls user
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-9" type="checkbox" id="nav-7-9">
    
    <label class="md-nav__link" for="nav-7-9">
      Devicemonitoring
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-9">
        Devicemonitoring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../devicemonitoring/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-10" type="checkbox" id="nav-7-10">
    
    <label class="md-nav__link" for="nav-7-10">
      Libraries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-10">
        Libraries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../libraries/README/" title="README" class="md-nav__link">
      README
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-11" type="checkbox" id="nav-7-11">
    
    <label class="md-nav__link" for="nav-7-11">
      Notifications
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-11">
        Notifications
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/design/" title="Design" class="md-nav__link">
      Design
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/events-processor-swagger/" title="Events processor swagger" class="md-nav__link">
      Events processor swagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../notifications/walkthrough/" title="Walkthrough" class="md-nav__link">
      Walkthrough
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-12" type="checkbox" id="nav-7-12">
    
    <label class="md-nav__link" for="nav-7-12">
      Provisioning
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-12">
        Provisioning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../provisioning/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../provisioning/provisioning-swagger/" title="Provisioning swagger" class="md-nav__link">
      Provisioning swagger
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../provisioning/provisioning-templates/" title="Provisioning templates" class="md-nav__link">
      Provisioning templates
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7-13" type="checkbox" id="nav-7-13">
    
    <label class="md-nav__link" for="nav-7-13">
      Request queue
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-7-13">
        Request queue
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../request-queue/overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisites" title="Pre-Requisites" class="md-nav__link">
    Pre-Requisites
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pre-created-certificates" title="Pre-created Certificates" class="md-nav__link">
    Pre-created Certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#certificate-creation-with-a-device-csr" title="Certificate Creation with a Device CSR" class="md-nav__link">
    Certificate Creation with a Device CSR
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-deploy" title="Auto-deploy" class="md-nav__link">
    Auto-deploy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#certificate-rotation-flow" title="Certificate Rotation Flow" class="md-nav__link">
    Certificate Rotation Flow
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security" title="Security" class="md-nav__link">
    Security
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="certificate-vendor">CERTIFICATE VENDOR<a class="headerlink" href="#certificate-vendor" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The certificate vendor manages the rotation of certificates involving a number of moving parts across CDF and AWS IoT.</p>
<p>There are two flows for certificate rotation. In the fist case, device certificates are pre-created and registered before the rotation request. In this case the device requests a new certificate and is vended an S3 presigned URL in order to download the certificate package. In the second case, the device provides the certificate vendor service a CSR. In this way the device can request an updated certificate while keeping the private key on the device. The certificate vendor then uses a CA certificate registered with AWS IoT to create a device certificate from the CSR and return this certificate to the device.</p>
<h2 id="pre-requisites">Pre-Requisites<a class="headerlink" href="#pre-requisites" title="Permanent link">&para;</a></h2>
<h3 id="pre-created-certificates">Pre-created Certificates<a class="headerlink" href="#pre-created-certificates" title="Permanent link">&para;</a></h3>
<p>A certificate package comprising of the certificate, public key and private key is to be created and registered with AWS IoT.  This certificate package is to be zipped, and stored in S3 with the name of the zip matching the name of the intended device.  The certificateId is associated with the certificate package by setting the <em>x-amz-meta-certificateid</em> S3 user metadata attribute of the zip file.</p>
<h3 id="certificate-creation-with-a-device-csr">Certificate Creation with a Device CSR<a class="headerlink" href="#certificate-creation-with-a-device-csr" title="Permanent link">&para;</a></h3>
<p>A CA certificate needs to be registered with AWS IoT. In addtion, the CA private key needs to be encrypted and stored in EC2 Parameter store so the certificate vendor service can sign device certificates using the CA.</p>
<h2 id="auto-deploy">Auto-deploy<a class="headerlink" href="#auto-deploy" title="Permanent link">&para;</a></h2>
<p>The following resources are automatically created by the deployment script, and utilized by this flow:</p>
<p>A Thing Group (default named <em>cdfRotateCertificates</em>).  Add devices to this group that require certificates rotating.</p>
<p>Using cdf-commands a command template is created to define the structure of an AWS IoT Job to request devices to rotate certificates.  Again using cdf-commands a command is created of the template to create an continuous AWS IoT Job targeting the rotateCertificates Thing Group.  Both the template and command creation is handled by the platform deployment script.</p>
<p>Example cdf-commands template:
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;templateId&quot;</span><span class="p">:</span> <span class="s2">&quot;RotateCertificates&quot;</span><span class="p">,</span>
    <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Rotate certificate of targetted devices&quot;</span><span class="p">,</span>
    <span class="nt">&quot;operation&quot;</span> <span class="p">:</span> <span class="s2">&quot;RotateCertificates&quot;</span><span class="p">,</span>
    <span class="nt">&quot;document&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;subscribeTopic\&quot;:\&quot;${cdf:parameters:subscribeTopic}\&quot;,\&quot;publishTopic\&quot;:\&quot;${cdf:parameters:publishTopic}\&quot;}&quot;</span><span class="p">,</span>
    <span class="nt">&quot;requiredDocumentParameters&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;subscribeTopic&quot;</span><span class="p">,</span>
        <span class="s2">&quot;publishTopic&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div></p>
<p>Example cdf-commands command:</p>
<ul>
<li>{rotateCertificatesThingGroupArn} and {deviceActivationRuleName} are injected by the deployment script</li>
<li>{thingName} is replaced on the device side by the device itself</li>
</ul>
<div class="highlight"><pre><span></span><span class="p">{</span>
 <span class="nt">&quot;templateId&quot;</span><span class="p">:</span> <span class="s2">&quot;RotateCertificates&quot;</span><span class="p">,</span>
 <span class="nt">&quot;targets&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;{rotateCertificatesThingGroupArn}&quot;</span><span class="p">],</span>
 <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;CONTINUOUS&quot;</span><span class="p">,</span>
 <span class="nt">&quot;rolloutMaximumPerMinute&quot;</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
 <span class="nt">&quot;documentParameters&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;subscribeTopic&quot;</span><span class="p">:</span><span class="s2">&quot;cdf/certificates/{thingName}/+&quot;</span><span class="p">,</span>
        <span class="nt">&quot;publishTopic&quot;</span><span class="p">:</span><span class="s2">&quot;$aws/rules/{deviceActivationRuleName}/cdf/certificates/{thingName}&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2 id="certificate-rotation-flow">Certificate Rotation Flow<a class="headerlink" href="#certificate-rotation-flow" title="Permanent link">&para;</a></h2>
<p>As part of the device startup sequence it should subscribe to AWS IoT jobs.  </p>
<p>Add the device to the <em>cdfRotateCertificates</em> Thing Group.  This will send a job to the targetted device which instructs the device to start the certificate rotation process.  The Job document contains the publish and subscribe topics for certificate rotation.  </p>
<p>Example job document (the device to replace the {thingName} token):</p>
<div class="highlight"><pre><span></span><span class="p">{</span>   
    <span class="nt">&quot;operation&quot;</span><span class="p">:</span> <span class="s2">&quot;RotateCertificates&quot;</span><span class="p">,</span>
    <span class="nt">&quot;subscribeTopic&quot;</span><span class="p">:</span><span class="s2">&quot;cdf/certificates/{thingName}/+&quot;</span><span class="p">,</span>
    <span class="nt">&quot;publishTopic&quot;</span><span class="p">:</span><span class="s2">&quot;$aws/rules/cdfcertificatevendordevelopmentMQTTRule1OS64259XAGQQ/cdf/certificates/{thingName}&quot;</span><span class="p">}</span>
<span class="err">}</span>
</pre></div>

<p>Certificate Vendor supports two methods of requesting certificates:</p>
<ul>
<li>pre-created certificates which live in S3 and are returned vi presigned URL when the device does a <code>get</code></li>
<li>a device does a <code>get</code> and supplies a CSR in the request - certificate vendor signs the certificate with an IoT registered CA and returns the certificate to the device via the MQTT response</li>
</ul>
<p>The device sends a request to the cdf-certificate-vendor via the above publish topic.</p>
<p>Example MQTT message body sent from the device to the AWS IoT Gateway:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span>
<span class="p">}</span>
</pre></div>

<p>Example MQTT message body sent from the device including a CSR:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
    <span class="nt">&quot;csr&quot;</span><span class="p">:</span><span class="s2">&quot;-----BEGIN CERTIFICATE REQUEST-----\nCSR CONTENT\n-----END CERTIFICATE REQUEST-----&quot;</span>
<span class="p">}</span>
</pre></div>

<p>Example message sent from AWS IoT Gateway to the cdf-certificatevendor (post message transformation by the AWS IoT Rule):</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;deviceId&quot;</span><span class="p">:</span> <span class="s2">&quot;device123&quot;</span><span class="p">,</span>
    <span class="nt">&quot;certificateId&quot;</span><span class="p">:</span><span class="s2">&quot;b77135fa885e8e48e42671a6335df5662a7da01e03625768ca572efa2bb131ee&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span>
<span class="p">}</span>
</pre></div>

<p>The AWS IoT Rule adds the device ID as well as the certificate ID used in the connection to the message payload sent to the Certificate Vendor Lambda function.</p>
<p>Upon receiving the request, the cdf-certificate-vendor validates that the device has been whitelisted. If whitelisted, Certificate Vendor checks for the presence of a CSR in the request. If provided, Certificate Venor uses the CSR to create a device certificate which it returns to the device. If a CSR is not present, Certificate Vendor proceeds to download the S3 Object Metadata associated with the certificate package to retrieve the certificateId, activates the certificate, then constructs and returns a pre-signed url to the device for downloading of the certificate package.  Final the device status is updated to activated.</p>
<p>Below are example success responses sent from cdf-certificationvendor to the device, published to the cdf/certificates/{thingName}/accepted MQTT topic:</p>
<p>Pre-created certificate to be retrieved from S3:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;deviceId&quot;</span><span class="p">:</span> <span class="s2">&quot;device123&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;https://cdf-157731826412-us-west-2.s3.amazonaws.com/certificates/device123.zip?AWSAccessKeyId=AKIAI7VRYYSEBBSSAXGQ&amp;Expires=1542129538&amp;Signature=fbuiPsYAhzj1TDMn4JjD6cX%2Bs4U%3D&quot;</span>
<span class="p">}</span>
</pre></div>

<p>Certificate requested by the device with a CSR:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;deviceId&quot;</span><span class="p">:</span> <span class="s2">&quot;device123&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
    <span class="nt">&quot;certificate&quot;</span><span class="p">:</span> <span class="s2">&quot;-----BEGIN CERTIFICATE-----\nCERTIFICATE CONTENT\n-----END CERTIFICATE-----&quot;</span>
<span class="p">}</span>
</pre></div>

<p>Upon receiving the response, the device downloads the certificate package (if delivered via presigned URL) and replaces its existing certificates, followed by sending an acknowledgement to the cdf-certificate-vendor.  Upon receiving the ackknowledgement the cdf-certificate-vendor the device is removed from the rotateCertificates group.</p>
<p>Example acknowledgement message:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;ack&quot;</span>
<span class="p">}</span>
</pre></div>

<p>If any failures occur during this flow, a rejected message is sent to the device, publish to the cdf/certificates/{thingName}/rejected MQTT topic.  Example message:</p>
<div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;deviceId&quot;</span><span class="p">:</span> <span class="s2">&quot;device123&quot;</span><span class="p">,</span>
    <span class="nt">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span>
    <span class="nt">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;DEVICE_NOT_WHITELISTED&quot;</span>
<span class="p">}</span>
</pre></div>

<h2 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h2>
<p>An IoT profile should exist to enforce the device to use its Thing Name as the MQTT clientId.  </p>
<p>In addition the profile should be configured to allow devices to receive AWS IoT Jobs, and to allow for publishing requests to and receiving responses from the cdf-certificate-vendor service as itself.</p>
<p>Only whitelisted devices (devices that registered with the Asset Library) are authorized to request new certificates.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../certificateactivator/overview/" title="CERTIFICATE ACTIVATOR" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                CERTIFICATE ACTIVATOR
              </span>
            </div>
          </a>
        
        
          <a href="../../commands/commands-swagger/" title="Commands swagger" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Commands swagger
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.30f6b8b1.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../../.."}})</script>
      
    
    
      
    
  </body>
</html>